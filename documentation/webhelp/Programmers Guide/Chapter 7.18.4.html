<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Dynamically Enabling a Protocol</title>
    <link rel="StyleSheet" href="css/Chapter%207.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <div>
      <img src="snt-logo-text2-transparent-small.png" />
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="Chapter%207.18.1.html#939527">7	Dynamic API</a> &gt; 7.3  Dynamically Enabling a Protocol</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading1Numbered">7.3  <a name="939527">Dynamically Enabling a Protocol</a></div>
      <div class="BodyAfterHead"><a name="941112">This section describes how to enable a dynamic variable and mentions issues to be aware of. Keep in mind that a dynamic variable becomes an object when listening is enabled.</a></div>
      <div class="Body"><a name="943049">To dynamically enable a protocol, do the following:</a></div>
      <div class="Numbered__0028first_0029_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered__0028first_0029_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered__0028first_0029_inner"><a name="941113">Change the type of the variables to the corresponding dynamic data types (see </a><span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Chapter%207.18.4.html#941033', '');" title="Dynamically Enabling a Protocol">Section&nbsp;7.3.1</a></span>).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="941123">Add a dynamic object in the hierarchy for each dynamic variable (see </a><span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Chapter%207.18.4.html#939531', '');" title="Dynamically Enabling a Protocol">Section&nbsp;7.3.2</a></span>).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="941130">Set the permissions (readable, writable, executable) of the dynamic objects (see </a><span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Chapter%207.18.4.html#942198', '');" title="Dynamically Enabling a Protocol">Section&nbsp;7.3.3</a></span>).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="941142">Allocate memory for the dynamically enabled protocol data structure (see </a><span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Chapter%207.18.4.html#941094', '');" title="Dynamically Enabling a Protocol">Section&nbsp;7.3.4</a></span>).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Heading2Numbered">7.3.1  <a name="941033">Declare Dynamic Variables</a></div>
      <div class="BodyAfterHead"><a name="941103">To make a protocol variable dynamically accessible, change the type of the variable to the corresponding dynamic data type. The built-in dynamic data types of </a><span class="Variable">QualNet</span> are listed in <span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Chapter%207.18.2.html#940349', '');" title="Implementation of the Dynamic API">Section&nbsp;7.1.2</a></span>. For example, in the CBR client data structure <span style="font-family: &quot;Courier New&quot;">AppDataCbrClient</span> shown below, variables <span style="font-family: &quot;Courier New&quot;">interval</span> and <span style="font-family: &quot;Courier New&quot;">numBytesSent</span> are dynamically enabled and the rest of the variables are not dynamically enabled. <span style="font-family: &quot;Courier New&quot;">AppDataCbrClient</span> is defined in <span class="Variable">QUALNET_HOME</span>/libraries/developer/src/app_cbr.h.</div>
      <div class="Code_Segment_Large"><a name="941041">&nbsp;</a></div>
      <div class="Code_Segment_Large"><a name="941070">typedef struct struct_app_cbr_client_str</a></div>
      <div class="Code_Segment_Large"><a name="941043">{</a></div>
      <div class="Code_Segment_Large"><a name="941044">    Address localAddr;</a></div>
      <div class="Code_Segment_Large"><a name="941045">    Address remoteAddr;</a></div>
      <div class="Code_Segment_Large"><a name="941046">    D_Clocktype interval;</a></div>
      <div class="Code_Segment_Large"><a name="941047">    clocktype sessionStart;</a></div>
      <div class="Code_Segment_Large"><a name="941048">    clocktype sessionFinish;</a></div>
      <div class="Code_Segment_Large"><a name="941049">    clocktype sessionLastSent;</a></div>
      <div class="Code_Segment_Large"><a name="941050">    clocktype endTime;</a></div>
      <div class="Code_Segment_Large"><a name="941051">    BOOL sessionIsClosed;</a></div>
      <div class="Code_Segment_Large"><a name="941052">    D_Int64 numBytesSent;</a></div>
      <div class="Code_Segment_Large"><a name="941053">    UInt32 numPktsSent;</a></div>
      <div class="Code_Segment_Large"><a name="941054">    UInt32 itemsToSend;</a></div>
      <div class="Code_Segment_Large"><a name="941055">    UInt32 itemSize;</a></div>
      <div class="Code_Segment_Large"><a name="941056">    short sourcePort;</a></div>
      <div class="Code_Segment_Large"><a name="941057">    Int32 seqNo;</a></div>
      <div class="Code_Segment_Large"><a name="941058">    D_UInt32 tos;</a></div>
      <div class="Code_Segment_Large"><a name="941038">}AppDataCbrClient;</a></div>
      <div class="Heading2Numbered">7.3.2  <a name="939531">Adding a Dynamic Object to the Hierarchy</a></div>
      <div class="BodyAfterHead"><a name="939532">For each dynamically enabled variable, add a dynamic object to the hierarchy by doing the following:</a></div>
      <div class="Numbered__0028first_0029_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered__0028first_0029_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered__0028first_0029_inner"><a name="941164">Create the path for the object.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="941168">Add the object at the appropriate path.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="939533">A path is created by calling an appropriate member function of class </a><span style="font-family: &quot;Courier New&quot;">D_Hierarchy</span>, which is defined in <span class="Variable">QUALNET_HOME</span>/include/dynamic.h. The functions used to create a path at different levels are:</div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941195">CreatePartitionPath: This function creates a path at the partition level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941209">CreateNodePath: This function creates a path at the node level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941196">CreateExternalInterfacePath: This function creates a path at the external interface level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941205">CreateApplicationPath: This function creates a path at the application level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941223">CreateTransportPath: This function creates a path at the transport level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941227">CreateNetworkPath: This function creates a path at the network level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941228">CreateRoutingPath: This function creates a path at the routing level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941232">CreateMacPath: This function creates a path at the MAC level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="941233">CreatePhynPath: This function creates a path at the PHY level.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="941193">Each function takes arguments necessary to determine the path. If an object can be added at that path the function returns TRUE. An object can not be added at a given path if the path already exists or if the protocol is not configured to be dynamically enabled.</a></div>
      <div class="Body"><a name="939534">After the path has been created the object can be added by calling the </a><span style="font-family: &quot;Courier New&quot;">D_Hierarchy</span> function AddObject. As an example, consider the CBR function AppCbrClientNewCbrClient shown in <span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Chapter%207.18.4.html#941402', '');" title="Dynamically Enabling a Protocol">Figure&nbsp;7-8</a></span>. Function AppCbrClientNewCbrClient first creates a path for the object <span style="font-family: &quot;Courier New&quot;">interval</span> by calling function CreateApplicationPath. If given permission by the hierarchy, i.e., if CreateApplicationPath returns TRUE, AppCbrClientNewCbrClient adds an object to the newly created path by calling the function AddObject. Note that a new object of class <span style="font-family: &quot;Courier New&quot;">D_ClocktypeObj</span> is added to the hierarchy that references the variable <span style="font-family: &quot;Courier New&quot;">cbrClient-&gt;interval</span>. Similarly, a path is created for the object <span style="font-family: &quot;Courier New&quot;">numBytesSent</span> and a new object of class <span style="font-family: &quot;Courier New&quot;">D_Int64Obj</span> is added to the hierarchy that references the variable <span style="font-family: &quot;Courier New&quot;">cbrClient-&gt;numBytesSent</span>.</div>
      <div class="Body"><a name="951043">Function AppCbrClientNewCbrClient is implemented in </a><span class="Variable">QUALNET_HOME</span>/libraries/developer/src/app_cbr.cpp. <span style="font-family: &quot;Courier New&quot;">D_ClocktypeObj</span>, <span style="font-family: &quot;Courier New&quot;">D_Int64Obj</span> and the other classes implementing dynamic objects are defined in <span class="Variable">QUALNET_HOME</span>/include/dynamic_vars.h.</div>
      <div class="Code_Segment"><a name="951044">&nbsp;</a></div>
      <div class="Code_Segment"><a name="941320">AppDataCbrClient *</a></div>
      <div class="Code_Segment"><a name="941321">AppCbrClientNewCbrClient(Node *node,</a></div>
      <div class="Code_Segment"><a name="941322">                         Address localAddr,</a></div>
      <div class="Code_Segment"><a name="941323">                         Address remoteAddr,</a></div>
      <div class="Code_Segment"><a name="941324">                         Int32 itemsToSend,</a></div>
      <div class="Code_Segment"><a name="941325">                         Int32 itemSize,</a></div>
      <div class="Code_Segment"><a name="941326">                         clocktype interval,</a></div>
      <div class="Code_Segment"><a name="941327">                         clocktype startTime,</a></div>
      <div class="Code_Segment"><a name="941328">                         clocktype endTime,</a></div>
      <div class="Code_Segment"><a name="941329">                         TosType tos)</a></div>
      <div class="Code_Segment"><a name="941330">{</a></div>
      <div class="Code_Segment"><a name="941331">    AppDataCbrClient *cbrClient;</a></div>
      <div class="Code_Segment"><a name="941333">    cbrClient = (AppDataCbrClient *) MEM_malloc(sizeof(AppDataCbrClient));</a></div>
      <div class="Code_Segment"><a name="941335">    memset(cbrClient, 0, sizeof(AppDataCbrClient));</a></div>
      <div class="Code_Segment"><a name="941352">    /*</a></div>
      <div class="Code_Segment"><a name="941353">     * fill in cbr info.</a></div>
      <div class="Code_Segment"><a name="941354">     */</a></div>
      <div class="Code_Segment"><a name="941355">    memcpy(&amp;(cbrClient-&gt;localAddr), &amp;localAddr, sizeof(Address));</a></div>
      <div class="Code_Segment"><a name="941356">    memcpy(&amp;(cbrClient-&gt;remoteAddr), &amp;remoteAddr, sizeof(Address));</a></div>
      <div class="Code_Segment"><a name="941315">    cbrClient-&gt;interval = interval;</a></div>
      <div class="Code_Segment"><a name="941360">    ...</a></div>
      <div class="Code_Segment"><a name="941362">    // Add CBR variables to hierarchy</a></div>
      <div class="Code_Segment"><a name="941363">    </a></div>
      <div class="Code_Segment"><a name="941417">    std::string path;</a></div>
      <div class="Code_Segment"><a name="941364">    D_Hierarchy *h = &amp;node-&gt;partitionData-&gt;dynamicHierarchy;</a></div>
      <div class="Code_Segment"><a name="941365">&nbsp;</a></div>
      <div class="Code_Segment"><a name="941366">    if (h-&gt;CreateApplicationPath(</a></div>
      <div class="Code_Segment"><a name="941367">            node,                   // node</a></div>
      <div class="Code_Segment"><a name="941368">            "cbrClient",            // protocol name</a></div>
      <div class="Code_Segment"><a name="941369">            cbrClient-&gt;sourcePort,  // port</a></div>
      <div class="Code_Segment"><a name="941370">            "interval",             // object name</a></div>
      <div class="Code_Segment"><a name="941371">            path))                  // path (output)</a></div>
      <div class="Code_Segment"><a name="941372">    {</a></div>
      <div class="Code_Segment"><a name="941373">        h-&gt;AddObject(</a></div>
      <div class="Code_Segment"><a name="941374">            path,</a></div>
      <div class="Code_Segment"><a name="941375">            new D_ClocktypeObj(&amp;cbrClient-&gt;interval));</a></div>
      <div class="Code_Segment"><a name="941376">    }</a></div>
      <div class="Code_Segment"><a name="941378">    if (h-&gt;CreateApplicationPath(</a></div>
      <div class="Code_Segment"><a name="941379">            node,</a></div>
      <div class="Code_Segment"><a name="941380">            "cbrClient",</a></div>
      <div class="Code_Segment"><a name="941381">            cbrClient-&gt;sourcePort,</a></div>
      <div class="Code_Segment"><a name="941382">            "numBytesSent",</a></div>
      <div class="Code_Segment"><a name="941383">            path))</a></div>
      <div class="Code_Segment"><a name="941384">    {</a></div>
      <div class="Code_Segment"><a name="941385">        h-&gt;AddObject(</a></div>
      <div class="Code_Segment"><a name="941386">            path,</a></div>
      <div class="Code_Segment"><a name="941387">            new D_Int64Obj(&amp;cbrClient-&gt;numBytesSent));</a></div>
      <div class="Code_Segment"><a name="941350">    }</a></div>
      <div class="Code_Segment"><a name="941391">   ...</a></div>
      <div class="Code_Segment"><a name="941392">}</a></div>
      <div class="Figure">FIGURE 7-8.&nbsp;&nbsp;<a name="941402">Adding Objects to the Hierarchy</a></div>
      <div class="Heading4"><a name="943058">Pitfalls to Avoid</a></div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="943071">Dynamic variables are C++ objects if listening is enabled (by default, listening is enabled). Several complications can arise from this:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet_Level_2_outer" style="margin-left: 13.536pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet_Level_2_inner" style="width: 13.680000000000001pt; white-space: nowrap;">
                <span class="Bullet2">-	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bullet_Level_2_inner"><a name="943059">The </a><span style="font-family: &quot;Courier New&quot;">struct</span>/<span style="font-family: &quot;Courier New&quot;">class</span> containing the variable should be allocated using a new call instead of MEM_malloc. This allows the dynamic object to be instantiated.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet_Level_2_outer" style="margin-left: 13.536pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet_Level_2_inner" style="width: 13.680000000000001pt; white-space: nowrap;">
                <span class="Bullet2">-	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bullet_Level_2_inner"><a name="943143">Dynamic objects can no longer be passed directly to the printf family of functions. Instead, they should be cast to their underlying data type. For example, a </a><span style="font-family: &quot;Courier New&quot;">D_Int32</span> variable should be cast to an <span style="font-family: &quot;Courier New&quot;">Int32</span> before printing.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bullet_Level_2_outer" style="margin-left: 13.536pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bullet_Level_2_inner" style="width: 13.680000000000001pt; white-space: nowrap;">
                <span class="Bullet2">-	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bullet_Level_2_inner"><a name="943061">Always test the protocol with listening enabled and disabled.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="943054">Dynamic variables may change at any time. Before dynamically enabling a variable make sure that a changing variable will not interfere with the protocol. If not, set the variable as not writable (see </a><span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Chapter%207.18.4.html#942198', '');" title="Dynamically Enabling a Protocol">Section&nbsp;7.3.3</a></span>).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Heading2Numbered">7.3.3  <a name="942198">Object Permissions</a></div>
      <div class="BodyAfterHead"><a name="942199">Objects may be read, written and executed. Object permissions are set automatically when the object is created. Variables may be read and written. Commands may be executed.</a></div>
      <div class="Body"><a name="942276">Objects may change their permissions by calling the </a><span style="font-family: &quot;Courier New&quot;">D_Hierarchy</span> functions SetReadable, SetWriteable and SetExecutable. As an example, the following code segment creates a path for the object <span style="font-family: &quot;Courier New&quot;">numNodes</span>, adds an object of class <span style="font-family: &quot;Courier New&quot;">D_Int32Obj</span> at the newly created path, and sets the permission for the newly created object to be non-writable.</div>
      <div class="Code_Segment_Large"><a name="942299">     </a></div>
      <div class="Code_Segment_Large"><a name="942310">     if (h-&gt;CreatePartitionPath(</a></div>
      <div class="Code_Segment_Large"><a name="942286">            partitionData,</a></div>
      <div class="Code_Segment_Large"><a name="942287">            "numNodes",</a></div>
      <div class="Code_Segment_Large"><a name="942288">            path))</a></div>
      <div class="Code_Segment_Large"><a name="942289">     {</a></div>
      <div class="Code_Segment_Large"><a name="942290">        h-&gt;AddObject(</a></div>
      <div class="Code_Segment_Large"><a name="942291">            path,</a></div>
      <div class="Code_Segment_Large"><a name="942292">            new D_Int32Obj(&amp;partitionData-&gt;numNodes));</a></div>
      <div class="Code_Segment_Large"><a name="942293">        h-&gt;SetWriteable(</a></div>
      <div class="Code_Segment_Large"><a name="942294">            path,</a></div>
      <div class="Code_Segment_Large"><a name="942295">            FALSE);</a></div>
      <div class="Code_Segment_Large"><a name="942277">     }</a></div>
      <div class="Heading2Numbered">7.3.4  <a name="941094">Initializing a Dynamically Enabled Protocol</a></div>
      <div class="BodyAfterHead"><a name="941095">A dynamically enabled protocol that is allocated using MEM_malloc must have the entire data structure set to 0 using the function memset. It is not enough to set each dynamic object to 0. This is necessary because there is extra data for each dynamic object that must be initialized.</a></div>
      <div class="Body"><a name="941096">If the dynamic protocol is allocated using the C++ memory management function new then the data structure may be set to 0 using the function, memset although it is not required.</a></div>
      <div class="Heading2Numbered">7.3.5  <a name="939555">Dynamic Strings</a></div>
      <div class="BodyAfterHead"><a name="939557">If listening is enabled, i.e., </a><span style="font-family: &quot;Courier New&quot;">D_LISTENING_ENABLED</span> is defined, then dynamic objects cannot be passed directly to the function printf. They must be cast to the appropriate type. As an example, consider printing a <span style="font-family: &quot;Courier New&quot;">D_Int32</span> object <span style="font-family: &quot;Courier New&quot;">aodv-&gt;numRequestsInitiated</span>. The value of this object can be printed by using the following line:</div>
      <div class="Code_Segment_Large"><a name="939558">&nbsp;</a></div>
      <div class="Code_Segment_Large" style="text-indent: -7.500240000000002pt"><a name="939559">printf(“numRequestsInitiated = %d\n”, (int) aodv-&gt;numRequestsInitiated);</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <hr align="left" />
    <table align="left">
      <tr>
        <td class="WebWorks_Company_Phone_Bottom">© 2008 - 2012 SCALABLE Network Technologies, Inc. All rights reserved.</td>
      </tr>
    </table>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>