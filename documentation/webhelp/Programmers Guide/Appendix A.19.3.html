<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Coding Guidelines and Compatibility Issues</title>
    <link rel="StyleSheet" href="css/Appendix%20A.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <div>
      <img src="snt-logo-text2-transparent-small.png" />
    </div>
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="Appendix%20A.19.1.html#998365">A	Coding Guidelines for 64-bit Platforms</a> &gt; A.2  Coding Guidelines and Compatibility Issues</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading1Numbered">A.2  <a name="998365">Coding Guidelines and Compatibility Issues</a></div>
      <div class="BodyAfterHead"><a name="998366">This section gives some coding guidelines and lists some compatibility issues for developing </a><span class="Variable">QualNet</span> models for 64-bit platforms.</div>
      <div class="Numbered__0028first_0029_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered__0028first_0029_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">1.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered__0028first_0029_inner"><a name="998367">Use data types defined in </a><span class="Variable">QualNet</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><span class="Variable"><a name="998368">QualNet</a></span> has defined some data types which have the same size on all platforms. Use these data types in order to avoid problems arising from data types having different sizes on different platforms. These data types are defined in <span class="Variable">QUALNET_HOME</span>/include/types.h and are listed in <span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Appendix%20A.19.3.html#998375', '');" title="Coding Guidelines and Compatibility Issues">Table&nbsp;A-2</a></span>.</div>
      <table class="Format_A" style="text-align: left; width: 233.88912pt" cellspacing="0" summary="">
        <caption>
          <div class="TableTitle">TABLE A-2.&nbsp;&nbsp;<a name="998375">Fixed-size Data Types Defined in </a><span class="Variable">QualNet</span></div>
        </caption>
        <tr>
          <td style="background-color: #E6E6E6; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: bottom; width: 116.94456pt">
            <div class="CellHeading"><a name="998379">Data Type</a></div>
          </td>
          <td style="background-color: #E6E6E6; border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: bottom; width: 116.94456pt">
            <div class="CellHeading"><a name="998381">Size</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998383">Int8</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998385">8-bit integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998387">UInt8</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998389">8-bit unsigned integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998391">Int16</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998393">16-bit integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998395">UInt16</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998397">16-bit unsigned integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998399">Int32</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998401">32-bit integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998403">UInt32</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998405">32-bit unsigned integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998407">Int64</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998409">64-bit integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998411">UInt64</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998413">64-bit unsigned integer</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998415">Float32</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998417">32-bit float</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody" style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Courier New&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><a name="998419">Float64</a></span></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 2pt; padding-left: 6pt; padding-right: 6pt; padding-top: 4pt; vertical-align: top">
            <div class="CellBody"><a name="998421">64-bit float</a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont"><a name="998422">&nbsp;</a></div>
      <div class="NumberedCont" style="color: #000000; font-family: Arial; font-size: 10.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: Arial; font-size: 10.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline"><a name="998423">Polymorphic Data Type </a></span><span style="font-family: &quot;Courier New&quot;">IntPtr</span></div>
      <div class="NumberedCont"><a name="998424">In addition to the above fixed-size data types, </a><span class="Variable">QualNet</span> also defines the polymorphic type <span style="font-family: &quot;Courier New&quot;">IntPtr</span> for pointer arithmetic. <span style="font-family: &quot;Courier New&quot;">IntPtr</span> is 32 bits long on 32-bit platforms and 64 bits long on 64-bit platforms.</div>
      <div class="NumberedCont"><a name="998425">&nbsp;</a></div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">2.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998426">Use </a><span style="font-family: &quot;Courier New&quot;">Int32</span> or <span style="font-family: &quot;Courier New&quot;">Int64</span> instead of <span style="font-family: &quot;Courier New&quot;">long</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998427">The data types </a><span style="font-family: &quot;Courier New&quot;">long</span> and <span style="font-family: &quot;Courier New&quot;">unsigned</span> <span style="font-family: &quot;Courier New&quot;">long</span> have different lengths on 32-bit and 64-bit platforms. Avoid using these data types. Use <span style="font-family: &quot;Courier New&quot;">Int32</span> (or <span style="font-family: &quot;Courier New&quot;">int</span>) and <span style="font-family: &quot;Courier New&quot;">UInt32</span> (or <span style="font-family: &quot;Courier New&quot;">unsigned int</span>) for signed and unsigned 32-bit integers, respectively. Use <span style="font-family: &quot;Courier New&quot;">Int64</span> and <span style="font-family: &quot;Courier New&quot;">UInt64</span> for signed and unsigned 64-bit integers, respectively. </div>
      <div class="NumberedCont"><a name="998428">&nbsp;</a></div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">3.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998429">Avoid assignment among variables of different sizes.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998430">Truncation problems can arise when assignments are made between 64-bit and 32-bit data items. Since </a><span style="font-family: &quot;Courier New&quot;">int</span>, <span style="font-family: &quot;Courier New&quot;">long</span>, and pointer data types are all 32 bits long in the ILP32, mixed assignments between these data types do not present any special problems. However, in the LP64 and P64 data models, these data types have different sizes and assignment among them may result in truncation errors, for instance, when a pointer variable is assigned to an <span style="font-family: &quot;Courier New&quot;">int</span> variable.</div>
      <div class="NumberedCont"><a name="998431">To avoid problems arising from different lengths of data types:</a></div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998432">Do not use </a><span style="font-family: &quot;Courier New&quot;">int</span> and <span style="font-family: &quot;Courier New&quot;">long</span> types interchangeably, since this may lead to truncation of significant digits or unexpected results.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998433">Do not pass an argument of type </a><span style="font-family: &quot;Courier New&quot;">long</span> or a pointer to functions expecting a type <span style="font-family: &quot;Courier New&quot;">int</span> argument, as this may lead to truncation.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998434">Do not exchange pointers and </a><span style="font-family: &quot;Courier New&quot;">int</span> types, since this may cause segmentation faults.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998435">Do not assign a </a><span style="font-family: &quot;Courier New&quot;">long</span> type to a <span style="font-family: &quot;Courier New&quot;">float</span>, since this may cause loss of accuracy.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998436">Do not cast pointers to </a><span style="font-family: &quot;Courier New&quot;">int</span> or <span style="font-family: &quot;Courier New&quot;">unsigned</span> <span style="font-family: &quot;Courier New&quot;">int</span>, since they may have unequal sizes on some platforms.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Note_Indented"><a name="998440"><img class="Default" src="images/Appendix%20A.19.3.1.jpg" width="48" height="50" style="display: block; float: none; left: 0.0; top: 0.0" alt="" />Keep in mind that the sizeof() function returns an </a><span style="font-family: &quot;Courier New&quot;">unsigned</span> <span style="font-family: &quot;Courier New&quot;">long</span>. Do not pass sizeof() to a function expecting an argument of type <span style="font-family: &quot;Courier New&quot;">int</span> or assign or cast it to an <span style="font-family: &quot;Courier New&quot;">int</span> since this may cause truncation and loss of data.</div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">4.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998441">Be aware of changes in </a><span style="font-family: &quot;Courier New&quot;">struct</span> size because of different paddings.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998442">Compilers introduce padding in structures in order to align the structure members. Because some data types have different lengths on 32-bit and 64-bit platforms, the size of the padding introduced to align structure members may be different on 32-bit and 64-bit platforms.</a></div>
      <div class="NumberedCont"><a name="998443">Consider the following example of a </a><span style="font-family: &quot;Courier New&quot;">struct</span> definition:</div>
      <div class="Declaration"><a name="998444">&nbsp;</a></div>
      <div class="Declaration"><a name="998445">struct myStruct </a></div>
      <div class="Declaration"><a name="998446">{<br />   long myLong;<br />   char myChar;<br />   struct myStruct* left;<br />   short myShort;<br />   struct myStruct* right;<br />}</a></div>
      <div class="Declaration"><a name="998447">&nbsp;</a></div>
      <div class="NumberedCont"><a name="1002016">In this example, the same structure definition has different sizes and the structure members have different offsets in different data models. In the ILP32 data model, this data structure contains 20 bytes, as shown in </a><span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Appendix%20A.19.3.html#1002021', '');" title="Coding Guidelines and Compatibility Issues">Figure&nbsp;A-1</a></span>.</div>
      <div class="NumberedCont"><a name="1002020"><img class="Default" src="images/32-bit%20struct.gif" width="319" height="123" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="Figure">FIGURE A-1.&nbsp;&nbsp;<a name="1002021">Structure Alignment in ILP32 Data Model</a></div>
      <div class="NumberedCont"><a name="1002092">In the LP64 data model, this data structure contains 40 bytes, as shown in </a><span class="Cross-Ref"><a href="javascript:WWHClickedPopup('Programmers_Guide', 'Appendix%20A.19.3.html#1002017', '');" title="Coding Guidelines and Compatibility Issues">Figure&nbsp;A-2</a></span>.</div>
      <div class="NumberedCont"><a name="1002022"><img class="Default" src="images/64-bit%20struct.gif" width="547" height="124" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="Figure">FIGURE A-2.&nbsp;&nbsp;<a name="1002017">Structure Alignment in LP64 Data Model</a></div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">5.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998524">Be aware of alignment effects of bit fields</a><span class="Strong">.</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998525">In the LP64 data model, unqualified bit fields are unsigned by default. In the ILP32 data model, unqualified bit fields are signed by default. Bit fields of enumerated types are signed if the enumeration base type is signed and unsigned if the enumeration base type is unsigned. </a></div>
      <div class="NumberedCont"><a name="998526">In the LP64 data model, unnamed, non-zero length bit fields do not affect the alignment of a structure or union. In the ILP32 data model, unnamed, non-zero length bit fields affect the alignment of structures and unions.</a></div>
      <div class="NumberedCont"><a name="998527">Also keep in mind that if you use </a><span style="font-family: &quot;Courier New&quot;">long</span> bit fields in 64-bit mode, their exact alignment may change in future versions of the compiler, even if the bit field is less than 32 bits in length.</div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">6.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998529">The data model determines whether enumerated types are signed or unsigned.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998530">In the LP64 data model, enumerated types are signed only if one or more of the enumeration constants defined for that type is negative. If all enumeration constants are non-negative, the type is unsigned. </a></div>
      <div class="NumberedCont"><a name="998531">In the ILP32 data model, enumerated types are always signed.</a></div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">7.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998533">Be aware of data type used for intermediate results of operations.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998534">Consider the operation:</a></div>
      <div class="Anchor"><a name="998535">&nbsp;</a></div>
      <div class="NumberedCont"><a name="998536">	 </a><span style="font-style: italic">a = b operation c</span></div>
      <div class="Anchor"><a name="998537">&nbsp;</a></div>
      <div class="NumberedCont"><a name="998538">The data type used for the intermediate results of the operation depends on the types of </a><span style="font-style: italic">b</span> and <span style="font-style: italic">c</span>. The intermediate result is then promoted to the type of <span style="font-style: italic">a</span>. Assuming that the intermediate result has the same data type as the type of <span style="font-style: italic">a</span> may result in erroneous or unexpected results. This is particularly true when dealing with bit shifts and bit masks because programmers often assume that the operations are performed in variables that have the same data type as the result. </div>
      <div class="NumberedCont"><a name="998539">In the above example, if </a><span style="font-style: italic">c</span> is a 64-bit data type, but <span style="font-style: italic">b</span> and <span style="font-style: italic">c</span> are 32-bit data types, then a 32-bit data type is used for the intermediate result. This may result in an overflow or truncation before the intermediate result is assigned to <span style="font-style: italic">a</span>.</div>
      <div class="NumberedCont"><a name="998540">In the following example, the left operand, 1, is a numeric constant, which the compiler treats as a 32-bit value in both ILP32 and LP64 data models:</a></div>
      <div class="Declaration"><a name="998541">&nbsp;</a></div>
      <div class="Declaration"><a name="998542">UInt64 y;</a></div>
      <div class="Declaration"><a name="998543">y = (1 &lt;&lt; 32);</a></div>
      <div class="Declaration"><a name="998544">&nbsp;</a></div>
      <div class="NumberedCont"><span class="HTML_Code"><a name="998545">The </a></span>bit shift operation results in an overflow in both ILP32 and LP64 data models because a 32-bit data type is used for the intermediate result in both data models. In 64-bit mode, the final result is undefined.</div>
      <div class="NumberedCont"><a name="998546">Use suffixes such as </a><span style="font-family: &quot;Courier New&quot;">L</span> and <span style="font-family: &quot;Courier New&quot;">UL</span> for long and unsigned long if you need long constants. For example, in 64-bit mode, the above code fragment can be changed to:</div>
      <div class="Declaration"><a name="998547">&nbsp;</a></div>
      <div class="Declaration"><a name="998548">UInt64 y;</a></div>
      <div class="Declaration"><a name="998549">y = (1L &lt;&lt; 32);</a></div>
      <div class="Declaration"><a name="998550">&nbsp;</a></div>
      <div class="NumberedCont"><a name="998551">In 64-bit mode, </a><span style="font-family: &quot;Courier New&quot;">y</span> is assigned 2^32 as a result of the above operation.</div>
      <div class="Anchor"><a name="998552">&nbsp;</a></div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">8.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998553">Use platform-independent formats for printing and reading 64-bit values.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998554">There is a special printf/scanf formatting string for 64-bit values. However, Windows and Linux platforms define different formatting strings:</a><span style="font-family: &quot;Courier New&quot;"> “I64” </span>in Windows and <span style="font-family: &quot;Courier New&quot;">“ll”</span> in Linux. <span class="Variable">QualNet</span> defines a platform-independent formatting string, <span style="font-family: &quot;Courier New&quot;">TYPES_64BITFMT</span>, for 64-bit values. It is recommended that you use <span style="font-family: &quot;Courier New&quot;">TYPES_64BITFMT</span> instead of <span style="font-family: &quot;Courier New&quot;">“I64”</span> or <span style="font-family: &quot;Courier New&quot;">“ll”</span>.</div>
      <div class="Anchor"><a name="998555">&nbsp;</a></div>
      <div class="NumberedCont"><a name="998556">Example:</a></div>
      <div class="Declaration"><a name="998557">&nbsp;</a></div>
      <div class="Declaration"><span class="HTML_Code"><a name="998558">printf ("%I64d", clock);                			// AVOID!</a></span></div>
      <div class="Declaration"><span class="HTML_Code"><a name="998559">printf ("%lld", clock);                 			// AVOID!</a></span></div>
      <div class="Declaration"><a name="998560">&nbsp;</a></div>
      <div class="Declaration"><span class="HTML_Code"><a name="998561">printf ("%" TYPES_64BITFMT "d", clock); 	// Correct</a></span></div>
      <div class="Declaration"><a name="998562">&nbsp;</a></div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">9.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998563">Use data declaration macros for 64-bit immediate values.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998564">Use data declaration macros for defining a 64-bit immediate value. </a><span class="Variable">QualNet</span> provides the following platform-independent macros for declaring 64-bit immediate values:</div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998565">TYPES_ToInt64(n) </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998566">TYPES_ToUInt64(n)</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_Indented_outer" style="margin-left: 14.4pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_Indented_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="BulletSymbol">•	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Bulleted_Indented_inner"><a name="998567">TYPES_ToIntPtr(n) </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Anchor"><a name="998568">&nbsp;</a></div>
      <div class="NumberedCont"><a name="998569">Example:</a></div>
      <div class="BodyAfterHead" style="margin-left: 21.25008pt; text-indent: 0.624959999999998pt"><a name="998570">The following two declarations declare the same 64-bit constant. However, the first definition is valid only on Linux platforms while the second declaration is valid on all platforms.</a></div>
      <div class="Declaration"><a name="998571">&nbsp;</a></div>
      <div class="Declaration"><span class="HTML_Code"><a name="998572">#define CLOCKTYPE_MAX 0x7fffffffffffffffLL              //AVOID!</a></span></div>
      <div class="Declaration"><span class="HTML_Code"><a name="998573">#define CLOCKTYPE_MAX TYPES_ToInt64(0x7fffffffffffffff) //Correct</a></span></div>
      <div class="Declaration"><a name="998574">&nbsp;</a></div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 14.4pt; white-space: nowrap;">
                <span class="StepNumber">10.	</span>
              </div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="998580">Be aware that the default return type of a function is </a><span style="font-family: &quot;Courier New&quot;">int</span><span class="Strong" style="font-family: Arial">.</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont"><a name="998581">By default, a function without an explicit return type returns an </a><span style="font-family: &quot;Courier New&quot;">int</span>. On 64-bit platforms, the <span style="font-family: &quot;Courier New&quot;">int</span> and pointer types have different sizes. Therefore, any function that returns a pointer should be declared with an explicit return type when compiling in 64-bit mode. Otherwise, the compiler will assume the function returns an <span style="font-family: &quot;Courier New&quot;">int</span> and truncate the resulting pointer, even if the returned value is assigned to a valid pointer.</div>
      <div class="Anchor"><a name="998582">&nbsp;</a></div>
      <div class="NumberedCont"><a name="1013016">Example:</a></div>
      <div class="BodyAfterHead" style="margin-left: 21.25008pt; text-indent: 0.624959999999998pt"><a name="998583">Function calloc is defined in malloc.h with an implicit return type. The following assignment works on 32-bit platforms (because int and pointer types have the same size) but will cause an error on 64-bit platforms because the pointer returned by calloc is truncated. </a></div>
      <div class="Declaration"><a name="998584">&nbsp;</a></div>
      <div class="Declaration"><a name="998585">a =(char *) calloc(25);</a></div>
      <div class="Declaration"><a name="998586">&nbsp;</a></div>
      <div class="BodyAfterHead" style="margin-left: 21.25008pt; text-indent: 0.624959999999998pt"><a name="998587">Even the type casting does not avoid this problem because the pointer returned by calloc is truncated before the type casting operation.</a></div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <hr align="left" />
    <table align="left">
      <tr>
        <td class="WebWorks_Company_Phone_Bottom">© 2008 - 2012 SCALABLE Network Technologies, Inc. All rights reserved.</td>
      </tr>
    </table>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>