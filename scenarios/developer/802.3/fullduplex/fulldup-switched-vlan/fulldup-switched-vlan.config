# Copyright (c) 2001-2009, Scalable Network Technologies, Inc.  All Rights Reserved.
#                          6100 Center Drive
#                          Suite 1250
#                          Los Angeles, CA 90045
#                          sales@scalable-networks.com
#
# This source code is licensed, not sold, and is subject to a written
# license agreement.  Among other things, no portion of this source
# code may be copied, transmitted, disclosed, displayed, distributed,
# translated, used as the basis for a derivative work, or used, in
# whole or in part, for any program or purpose other than its intended
# use in compliance with the license agreement as part of the QualNet
# software.  This source code and certain of the algorithms contained
# within it are confidential trade secrets of Scalable Network
# Technologies, Inc. and may not be used as the basis for any other
# software, hardware, product or service.
#
# The configuration using 3 switches (Sw1, Sw2, Sw3) as shown.
# A router, node 100, is used. Routing is Bellmanford.
# Vlan 2 is network number 2.0
# Vlan 3 is network number 3.0
# Trunk links have network number 1.0
# Switches have independant database learning
#
#                12                     22                     32
#                 |                      |                      |
#                 | 2 access             | 2 access             | 2 access
#                 |                      |                      |
#   2 access +--------+             +--------+             +--------+
#    --------|        |   2 trunk   |        |   2 trunk   |        |
#  100       |  Sw1   |-------------|  Sw2   |-------------|  Sw3   |
#    --------|        |   3 trunk   |        |   3 trunk   |        |
#   3 access +--------+             +--------+             +--------+
#                 |                      |                      |
#                 | 3 trunk              | 3 trunk              | 3 trunk
#                 |                      |                      |
#                14                     24                     34
# Application:
#    FTP/GENERIC 12 32 10 1000 100S 0S
#    FTP/GENERIC 12 34 10 1000 150S 0S
#    FTP/GENERIC 14 34 10 1000 200S 0S
#    FTP/GENERIC 14 32 10 1000 250S 0S
#
# Nodes in the same VLAN receive frames via switching
# Nodes in different VLANs receive routed frames from other VLANs

[1 2 3] SWITCH YES
SWITCH-RUN-STP NO
SWITCH-VLAN-LEARNING INDEPENDENT

SWITCH-VLAN-AWARE YES

[1] SWITCH-VLAN-MEMBER-SET[2] {2 3 5}
[1] SWITCH-VLAN-UNTAGGED-MEMBER-SET[2] {2 5}
[1] SWITCH-VLAN-MEMBER-SET[3] {4 3 6}
[1] SWITCH-VLAN-UNTAGGED-MEMBER-SET[3] {6}

[2] SWITCH-VLAN-MEMBER-SET[2] {2 3 1}
[2] SWITCH-VLAN-UNTAGGED-MEMBER-SET[2] {2}
[2] SWITCH-VLAN-MEMBER-SET[3] {4 3 1}

[3] SWITCH-VLAN-MEMBER-SET[2] {2 1}
[3] SWITCH-VLAN-UNTAGGED-MEMBER-SET[2] {2}
[3] SWITCH-VLAN-MEMBER-SET[3] {4 1}


SUBNET N8-2.0 {1, 12}
[1] SWITCH-PORT-MAP[2] 2.1
[1] SWITCH-PORT-VLAN-ID[2] 2
[2.2] SWITCH-STATION-VLAN-ID 2
[2.2] SWITCH-STATION-VLAN-TAGGING NO

SUBNET N8-2.0 {2, 22}
[2] SWITCH-PORT-MAP[2] 2.3
[2] SWITCH-PORT-VLAN-ID[2] 2
[2.4] SWITCH-STATION-VLAN-ID 2
[2.4] SWITCH-STATION-VLAN-TAGGING NO

SUBNET N8-2.0 {3, 32}
[3] SWITCH-PORT-MAP[2] 2.5
[3] SWITCH-PORT-VLAN-ID[2] 2
[2.6] SWITCH-STATION-VLAN-ID 2
[2.6] SWITCH-STATION-VLAN-TAGGING NO

SUBNET N8-2.0 {1, 100}
[1] SWITCH-PORT-MAP[5] 2.7
[1] SWITCH-PORT-VLAN-ID[5] 2

[N8-2.0] MAC-PROTOCOL MAC802.3
[N8-2.0] SUBNET-DATA-RATE             1000000000
[N8-2.0] SUBNET-PROPAGATION-DELAY     1US
[N8-2.0] MAC802.3-MODE FULL-DUPLEX


SUBNET N8-3.0 {1, 14}
[1] SWITCH-PORT-MAP[4] 3.1
[1] SWITCH-PORT-VLAN-ID[4] 3
[3.2] SWITCH-STATION-VLAN-ID 3
[3.2] SWITCH-STATION-VLAN-TAGGING YES

SUBNET N8-3.0 {2, 24}
[2] SWITCH-PORT-MAP[4] 3.3
[2] SWITCH-PORT-VLAN-ID[4] 3
[3.4] SWITCH-STATION-VLAN-ID 3
[3.4] SWITCH-STATION-VLAN-TAGGING YES

SUBNET N8-3.0 {3, 34}
[3] SWITCH-PORT-MAP[4] 3.5
[3] SWITCH-PORT-VLAN-ID[4] 3
[3.6] SWITCH-STATION-VLAN-ID 3
[3.6] SWITCH-STATION-VLAN-TAGGING YES

SUBNET N8-3.0 {1, 100}
[1] SWITCH-PORT-MAP[6] 3.7
[1] SWITCH-PORT-VLAN-ID[6] 3

[N8-3.0] MAC-PROTOCOL MAC802.3
[N8-3.0] SUBNET-DATA-RATE             1000000000
[N8-3.0] SUBNET-PROPAGATION-DELAY     1US
[N8-3.0] MAC802.3-MODE FULL-DUPLEX

LINK N8-1.0 {1, 2}
[1] SWITCH-PORT-MAP[3] 1.1
[1] SWITCH-PORT-VLAN-ID[3] 1

[2] SWITCH-PORT-MAP[1] 1.2
[2] SWITCH-PORT-VLAN-ID[1] 1

LINK N8-1.0 {2, 3}
[2] SWITCH-PORT-MAP[3] 1.3
[2] SWITCH-PORT-VLAN-ID[3] 1

[3] SWITCH-PORT-MAP[1] 1.4
[3] SWITCH-PORT-VLAN-ID[1] 1


SIMULATION-TIME   100S


LINK-BANDWIDTH               10000000
LINK-PROPAGATION-DELAY       10US

SWITCH-PORT-STATISTICS                  YES
SWITCH-QUEUE-STATISTICS                 YES
SWITCH-SCHEDULER-STATISTICS             YES
SWITCH-DATABASE-STATISTICS              YES
SWITCH-PORT-VLAN-STATISTICS             YES

ROUTING-PROTOCOL BELLMANFORD

APP-CONFIG-FILE   ./fulldup-switched-vlan.app

TCP-MSS 1000

# .............................................

VERSION 6.1
EXPERIMENT-NAME fulldup-switched-vlan
SEED   1
COORDINATE-SYSTEM    CARTESIAN
TERRAIN-DIMENSIONS   (1500, 1500)

NODE-PLACEMENT   UNIFORM

MOBILITY   NONE
MOBILITY-POSITION-GRANULARITY   1.0

PROPAGATION-CHANNEL-FREQUENCY 2.4e9 # required
PROPAGATION-MODEL           STATISTICAL
PROPAGATION-LIMIT   -111.0
PROPAGATION-PATHLOSS-MODEL  TWO-RAY
PROPAGATION-SHADOWING-SIGMA 0.0
PROPAGATION-FADING-MODEL NONE

PHY-MODEL                   PHY802.11b
PHY-TEMPERATURE             290
PHY-NOISE-FACTOR            10.0
PHY802.11b-DATA-RATE          2000000
PHY802.11b-TX-POWER           15.0
PHY802.11b-RX-SENSITIVITY     -91.0
PHY802.11b-RX-THRESHOLD       -81.0

ANTENNA-GAIN    0.0
ANTENNA-HEIGHT  1.5

NETWORK-PROTOCOL   IP
IP-QUEUE-NUM-PRIORITIES   3
IP-QUEUE-PRIORITY-QUEUE-SIZE   50000
IP-QUEUE-TYPE   FIFO
IP-QUEUE-SCHEDULER   STRICT-PRIORITY
IP-FORWARDING YES

APPLICATION-STATISTICS                  YES
TCP-STATISTICS                          NO
UDP-STATISTICS                          NO
RSVP-STATISTICS                         NO
ROUTING-STATISTICS                      NO
IGMP-STATISTICS                         NO
EXTERIOR-GATEWAY-PROTOCOL-STATISTICS    NO
NETWORK-LAYER-STATISTICS                YES
QUEUE-STATISTICS                        NO
MAC-LAYER-STATISTICS                    YES
PHY-LAYER-STATISTICS                    NO

